<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Web game</title>

<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
    }

    canvas {
        display: block;
        margin: auto;
        background: #000;
    }
</style>
</head>

<body>

<canvas id="game" width="960" height="540"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// ---------------- SETTINGS ----------------
const WIDTH = canvas.width;
const HEIGHT = canvas.height;
const keys = {};

// ---------------- LOAD IMAGES ----------------
const background = new Image();
background.src = "assets/background.png";

const playerSprites = {
    idle: new Image(),
    up: new Image(),
    down: new Image(),
    left: new Image(),
    right: new Image()
};

playerSprites.idle.src = "assets/player_idle.png";
playerSprites.up.src = "assets/player_up.png";
playerSprites.down.src = "assets/player_down.png";
playerSprites.left.src = "assets/player_left.png";
playerSprites.right.src = "assets/player_right.png";

const bossImage = new Image();
bossImage.src = "assets/boss.png";

// ---------------- PLAYER ----------------
const player = {
    x: 150,
    y: HEIGHT - 120,
    width: 64,
    height: 64,
    speed: 5,
    sprite: playerSprites.idle,
    attacking: false
};

// ---------------- BOSS ----------------
const boss = {
    x: 700,
    y: HEIGHT - 120,
    width: 96,
    height: 96
};

// ---------------- INPUT ----------------
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

// ---------------- UPDATE ----------------
function update() {

    // Movement
    if (keys["a"] || keys["A"]) {
        player.x -= player.speed;
    }
    if (keys["d"] || keys["D"]) {
        player.x += player.speed;
    }

    // Attacks
    player.attacking = false;

    if (keys["ArrowUp"]) {
        player.sprite = playerSprites.up;
        player.attacking = true;
    }
    else if (keys["ArrowDown"]) {
        player.sprite = playerSprites.down;
        player.attacking = true;
    }
    else if (keys["ArrowLeft"]) {
        player.sprite = playerSprites.left;
        player.attacking = true;
    }
    else if (keys["ArrowRight"]) {
        player.sprite = playerSprites.right;
        player.attacking = true;
    }
    else {
        player.sprite = playerSprites.idle;
    }
}

// ---------------- DRAW ----------------
function draw() {
    ctx.clearRect(0, 0, WIDTH, HEIGHT);

    // Background
    ctx.drawImage(background, 0, 0, WIDTH, HEIGHT);

    // Boss
    ctx.drawImage(bossImage, boss.x, boss.y, boss.width, boss.height);

    // Player
    ctx.drawImage(player.sprite, player.x, player.y, player.width, player.height);
}

// ---------------- GAME LOOP ----------------
function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
